# 测试文档 - 用户登录功能

## 功能概述
本文档描述了应用程序的用户登录功能。

## 需求说明

### 功能需求
1. 用户可以使用用户名和密码登录
2. 系统根据数据库验证凭证
3. 登录成功后重定向到仪表盘
4. 登录失败时显示错误消息

### 输入参数
- **用户名**: 字符串，4-20个字符，仅支持字母、数字和下划线
- **密码**: 字符串，6-20个字符，必须包含字母和数字

### 验证规则
1. 用户名和密码不能为空
2. 用户名必须在系统中存在
3. 密码必须与存储的哈希值匹配
4. 连续5次登录失败后，账户将被锁定30分钟

### 成功响应
- 返回认证令牌
- 重定向到用户仪表盘
- 记录登录事件及时间戳

### 错误响应
- 凭证无效："用户名或密码不正确"
- 账户已锁定："账户已被临时锁定，请稍后再试"
- 系统错误："系统暂时不可用"

## 测试场景

### 正常流程
1. 用户输入有效的用户名
2. 用户输入正确的密码
3. 用户点击登录按钮
4. 系统验证凭证
5. 用户被重定向到仪表盘

### 异常场景
1. **用户名为空**: 显示"用户名是必填项"
2. **密码为空**: 显示"密码是必填项"
3. **凭证无效**: 显示错误并增加失败计数
4. **账户已锁定**: 显示锁定消息及剩余时间

## 安全考虑
- 密码必须使用 bcrypt 加密
- 登录尝试应该有速率限制
- 会话令牌应在24小时后过期
- 所有登录事件都应被记录

## 性能要求
- 登录应在2秒内完成
- 系统应支持100个并发登录
- 数据库查询应该被优化

---
这是为 RAG 测试用例助手准备的测试文档。
